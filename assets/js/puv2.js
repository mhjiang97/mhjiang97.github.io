var t,e;!function(){function n(){s=!0,document.removeEventListener("DOMContentLoaded",n),a.forEach((t=>t.call(document))),a=[]}var o,a=[],s=!1;const i=(t=2)=>`https://events.vercount.one/api/v${t}/log`;t={fetch:async function(t){const n=i(2),a=i(1);try{e.hideAll();const s=(()=>{const t=`${window.screen.width}x${window.screen.height}x${window.screen.colorDepth}`,e=Intl.DateTimeFormat().resolvedOptions().timeZone||"",n=navigator.languages?navigator.languages.join(","):navigator.language||"",o=document.createElement("canvas").getContext("webgl"),a=o?o.getParameter(o.RENDERER):"",s=[t,e,n,navigator.userAgent,a,(new Date).getTimezoneOffset()].join("|");let i=0;for(let t=0;t<s.length;t++)i=(i<<5)-i+s.charCodeAt(t),i&=i;return Math.abs(i).toString(36)})(),i=window.location.href;let r=i;i.startsWith("http")||(r="https://local.file/invalid-protocol");try{const a=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-Browser-Token":s},body:JSON.stringify({url:r,token:s})});if(!a.ok)throw new Error(`API responded with status: ${a.status}`);const i=(t=>{if(t&&t.status){if("success"===t.status&&t.data)return t.data;if("error"===t.status&&t.data)return t.data;if("error"===t.status)return{site_uv:0,site_pv:0,page_pv:0}}return t||{site_uv:0,site_pv:0,page_pv:0}})(await a.json());o((()=>{t(i),localStorage.setItem("visitorCountData",JSON.stringify(i)),e.showAll()}))}catch(n){try{const n=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json","X-Browser-Token":s},body:JSON.stringify({url:r,token:s})}),i=await n.json();o((()=>{t(i),localStorage.setItem("visitorCountData",JSON.stringify(i)),e.showAll()}))}catch(n){const i=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:r,token:s})}),c=await i.json();o((()=>{t(c),localStorage.setItem("visitorCountData",JSON.stringify(c)),e.showAll()}))}}}catch(n){const a=localStorage.getItem("visitorCountData");if(a)try{const n=JSON.parse(a);o((()=>{t(n),e.showAll()}))}catch(t){e.hideAll()}else e.hideAll()}}},e={counterIds:["site_pv","page_pv","site_uv"],updateText:function(t){this.counterIds.forEach((e=>{const n=document.getElementById("busuanzi_value_"+e);n&&(n.textContent=t[e]||"0");const o=document.getElementById("vercount_value_"+e);o&&(o.textContent=t[e]||"0")}))},hideAll:function(){this.counterIds.forEach((t=>{const e=document.getElementById("busuanzi_container_"+t);e&&(e.style.display="none");const n=document.getElementById("vercount_container_"+t);n&&(n.style.display="none")}))},showAll:function(){this.counterIds.forEach((t=>{const e=document.getElementById("busuanzi_container_"+t);e&&(e.style.display="inline");const n=document.getElementById("vercount_container_"+t);n&&(n.style.display="inline")}))}},(o=function(t){s||"interactive"===document.readyState||"complete"===document.readyState?t.call(document):(a.push(t),document.addEventListener("DOMContentLoaded",n))})((()=>{t.fetch(e.updateText.bind(e))}))}();